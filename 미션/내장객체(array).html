<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>내장객체(array)</title>
  </head>
  <body>
    <script>
      /* 문제1. 특정 값의 인덱스 찾기
         1) findIndexValue 함수 생성
         2) findIndexValue 인수로 fruits, "cherry" 전달
         3) fruits에 cherry가 있는 인덱스값 리턴

         답: 2
      */
      const fruits = ["apple", "banana", "cherry", "melon"];

      const findIndexValue = (arr, ele) => arr.findIndex((el) => el == ele);

      console.log(findIndexValue(fruits, "cherry"));

      /* 문제2. 배열을 이용하여 CSV 형식의 문자열을 생성하는 함수
         1) generateCSV 함수 생성
         2) generateCSV 인수로 users 넘기기
         3) 인수로 넘겨받은 users의 요소들을 아래와 같이 콘솔에 출력
            name, age, city
            John, 30, New York
            Alice, 25, Los Angeles
            Bob, 35, Chicago
      */
      const users = [
        { name: "John", age: 30, city: "New York" },
        { name: "Alice", age: 25, city: "Los Angeles" },
        { name: "Bob", age: 35, city: "Chicago" },
      ];
      /*
      const generateCSV = (param) => {
        // let str = "name, age, city\n";
        let arr = [];
        const arrA = [];
        let str = "";
        param1 = param[0];
        const keys = Object.keys(param1);
        arrA.push(keys.join(", "));
        param.forEach((ele) => {
          arr = [];
          arr.push(ele.name);
          arr.push(ele.age);
          arr.push(ele.city);
          arrA.push(arr.join(", "));
        });
        str = arrA.join("\n");
        return str;
      };
      console.log(generateCSV(users));
      */

      const generateCSV = (arr) => {
        //헤더
        const header = [];
        for (key in arr[0]) {
          header.push(key);
        }
        //컨텐츠
        const contents = [];
        for (item of arr) {
          const values = []; // 한줄씩 넣을 예정
          for (key in item) {
            values.push(item[key]); // 키에 해당하는 값만 insert
          }
          contents.push(values.join(", "));
        }
        const result = `${header.join(", ")}\n${contents.join("\n")}`;
        return result;
      };

      console.log(generateCSV(users));
    </script>
  </body>
</html>
